"use strict";(()=>{var e={};e.id=5025,e.ids=[5025],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},76224:e=>{e.exports=require("tty")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},66424:(e,t,s)=>{s.r(t),s.d(t,{headerHooks:()=>j,originalPathname:()=>E,patchFetch:()=>x,requestAsyncStorage:()=>h,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>q});var o={};s.r(o),s.d(o,{DELETE:()=>g,GET:()=>u,PUT:()=>c});var r=s(95419),a=s(69108),n=s(99678),p=s(78070),i=s(83949),l=s(85638);async function u(e,{params:t}){try{console.log(`[動態路由] GET 請求路徑: /api/v1/appointments/${t.path.join("/")}`);let s=t.path.join("/"),{searchParams:o}=new URL(e.url),r={};o.forEach((e,t)=>{r[t]=e});let a=(0,l.l9)(`/appointments/${s}`);console.log("動態路由代理GET請求到:",a),console.log("查詢參數:",r);let n={};e.headers.forEach((e,t)=>{"host"!==t&&(n[t]=e)}),n.Accept="application/json",console.log("請求頭:",n);let u=await i.Z.get(a,{params:r,headers:n,timeout:1e4});return console.log("後端回應:",u.status,typeof u.data),p.Z.json(u.data,{status:u.status})}catch(e){if(console.error("動態路由代理GET請求錯誤:",e.message),e.response)return console.error("錯誤狀態碼:",e.response.status),console.error("錯誤數據:",e.response.data),p.Z.json({detail:e.response.data?.detail||"請求處理失敗",message:e.message,path:t.path},{status:e.response.status});if(e.request)return console.error("沒有收到響應，請求發送失敗"),p.Z.json({detail:"無法連接到後端服務",message:e.message,path:t.path},{status:503});return p.Z.json({detail:"請求處理失敗",message:e.message,path:t.path},{status:500})}}async function c(e,{params:t}){try{let s=t.path.join("/"),o=await e.json(),r=(0,l.l9)(`/appointments/${s}`);console.log("動態路由代理PUT請求到:",r),console.log("請求資料:",JSON.stringify(o,null,2));let a={};e.headers.forEach((e,t)=>{"host"!==t&&(a[t]=e)}),a["Content-Type"]="application/json",console.log("請求頭:",a);let n=await i.Z.put(r,o,{headers:a,timeout:1e4});return console.log("後端回應狀態:",n.status),console.log("後端回應數據:",n.data),p.Z.json(n.data,{status:n.status})}catch(e){if(console.error("動態路由代理PUT請求錯誤:",e.message),e.response)return console.error("錯誤狀態碼:",e.response.status),console.error("錯誤數據:",e.response.data),p.Z.json({detail:e.response.data?.detail||"請求處理失敗",message:e.message,debugInfo:{status:e.response.status,url:e.config?.url,method:e.config?.method},path:t.path},{status:e.response.status});if(e.request)return console.error("未收到回應的請求:",e.request),p.Z.json({detail:"無法連接到後端服務器",message:e.message,debugInfo:{isConnectionError:!0,url:e.config?.url,method:e.config?.method},path:t.path},{status:503});return console.error("其他錯誤:",e.message),p.Z.json({detail:"請求處理失敗",message:e.message,path:t.path},{status:500})}}async function g(e,{params:t}){try{let s=t.path.join("/"),o=(0,l.l9)(`/appointments/${s}`);console.log("動態路由代理DELETE請求到:",o);let r={};e.headers.forEach((e,t)=>{"host"!==t&&(r[t]=e)}),console.log("請求頭:",r);let a=await i.Z.delete(o,{headers:r,timeout:1e4});return console.log("後端回應狀態:",a.status),console.log("後端回應數據:",a.data),p.Z.json(a.data,{status:a.status})}catch(e){if(console.error("動態路由代理DELETE請求錯誤:",e.message),e.response)return console.error("錯誤狀態碼:",e.response.status),console.error("錯誤數據:",e.response.data),p.Z.json({detail:e.response.data?.detail||"刪除失敗",message:e.message,debugInfo:{status:e.response.status,url:e.config?.url,method:e.config?.method},path:t.path},{status:e.response.status});if(e.request)return console.error("未收到回應的請求:",e.request),p.Z.json({detail:"無法連接到後端服務器",message:e.message,debugInfo:{isConnectionError:!0,url:e.config?.url,method:e.config?.method},path:t.path},{status:503});return console.error("其他錯誤:",e.message),p.Z.json({detail:"刪除失敗",message:e.message,path:t.path},{status:500})}}let d=new r.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/v1/appointments/[...path]/route",pathname:"/api/v1/appointments/[...path]",filename:"route",bundlePath:"app/api/v1/appointments/[...path]/route"},resolvedPagePath:"/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/api/v1/appointments/[...path]/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:f,headerHooks:j,staticGenerationBailout:q}=d,E="/api/v1/appointments/[...path]/route";function x(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},85638:(e,t,s)=>{s.d(t,{l9:()=>r});var o=s(83949);let r=(e="")=>{let t=e.startsWith("/")?e:`/${e}`;return`https://clinic.aspiratcm.com/api/v1${t}`},a=o.Z.create({baseURL:r(),headers:{"Content-Type":"application/json",Accept:"application/json"},timeout:15e3});a.interceptors.request.use(e=>{if(console.log(`[API請求] ${e.method?.toUpperCase()} ${e.url}`),e.params&&console.log(`[請求參數] ${JSON.stringify(e.params)}`),e.data&&"string"!=typeof e.data)try{console.log(`[請求數據] ${JSON.stringify(e.data)}`)}catch{console.log("[請求數據] 無法序列化")}return e},e=>(console.error("[API請求錯誤]",e),Promise.reject(e))),a.interceptors.response.use(e=>(console.log(`[API響應] ${e.status} ${e.config.url}`),e),e=>{let t=e?.response?.status,s=e?.config?.url,o=e?.config?.method?.toUpperCase();return t?console.error(`[${o} ${s}] 錯誤 ${t}`,e.response.data):console.error("[API錯誤]",e.message),Promise.reject(e)})}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),o=t.X(0,[1638,6206,3949],()=>s(66424));module.exports=o})();