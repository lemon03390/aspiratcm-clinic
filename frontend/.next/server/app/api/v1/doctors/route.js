"use strict";(()=>{var e={};e.id=411,e.ids=[411],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9491:e=>{e.exports=require("assert")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},6224:e=>{e.exports=require("tty")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},4053:(e,o,r)=>{r.r(o),r.d(o,{headerHooks:()=>f,originalPathname:()=>q,patchFetch:()=>A,requestAsyncStorage:()=>g,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>P});var s={};r.r(s),r.d(s,{GET:()=>u,POST:()=>p});var t=r(5419),n=r(9108),a=r(9678),c=r(8070),i=r(3949),l=r(5638);async function u(e){try{let o;console.log("開始處理 /api/v1/doctors 的 GET 請求");try{o=(0,l.l9)("/doctors"),console.log("代理GET請求到:",o)}catch(e){console.error("生成後端URL時發生錯誤:",e.message),console.error("環境設置:",{NODE_ENV:"production",NEXT_PUBLIC_API_BASE_URL:"https://clinic.aspiratcm.com/api/v1"}),o="/api/v1/doctors",console.log("使用後備URL:",o)}let r={};e.headers.forEach((e,o)=>{"host"!==o&&(r[o]=e)}),r.Accept="application/json",console.log("請求頭:",r);let s=await i.Z.get(o,{headers:r,timeout:1e4});return console.log("後端回應狀態:",s.status),console.log("後端回應數據:",s.data),c.Z.json(s.data,{status:s.status})}catch(t){console.error("代理GET請求錯誤詳細信息:",t);let o="未知錯誤",r=t.message||"未知錯誤信息",s=500;return t.response?(s=t.response.status,o=t.response.data?.detail||"請求處理失敗",console.error("錯誤狀態碼:",s),console.error("錯誤數據:",t.response.data),console.error("請求配置:",{url:t.config?.url,method:t.config?.method,params:t.config?.params})):t.request?(s=503,o="無法連接到後端服務器",console.error("未收到回應的請求:",t.request),console.error("請求URL:",t.config?.url)):(o="請求處理失敗",console.error("其他錯誤:",r),console.error("環境信息:",{NODE_ENV:"production",API_BASE_URL:"https://clinic.aspiratcm.com/api/v1"})),c.Z.json({detail:o,message:r,timestamp:new Date().toISOString(),debugInfo:{status:s,url:t.config?.url,method:t.config?.method,requestId:e.headers.get("x-request-id")||"unknown"}},{status:s})}}async function p(e){try{console.log("開始處理 /api/v1/doctors 的 POST 請求");let o=await e.json(),r=(0,l.l9)("/doctors");console.log("代理POST請求到:",r),console.log("請求資料:",JSON.stringify(o,null,2));let s={};e.headers.forEach((e,o)=>{"host"!==o&&(s[o]=e)}),s["Content-Type"]="application/json",console.log("請求頭:",s);let t=await i.Z.post(r,o,{headers:s,timeout:1e4});return console.log("後端回應狀態:",t.status),console.log("後端回應數據:",t.data),c.Z.json(t.data,{status:t.status})}catch(e){if(console.error("代理POST請求錯誤:",e.message),e.response)return console.error("錯誤狀態碼:",e.response.status),console.error("錯誤數據:",e.response.data),c.Z.json({detail:e.response.data?.detail||"請求處理失敗",message:e.message,debugInfo:{status:e.response.status,url:e.config?.url,method:e.config?.method}},{status:e.response.status});if(e.request)return console.error("未收到回應的請求:",e.request),c.Z.json({detail:"無法連接到後端服務器",message:e.message,debugInfo:{isConnectionError:!0,url:e.config?.url,method:e.config?.method}},{status:503});return console.error("其他錯誤:",e.message),c.Z.json({detail:"請求處理失敗",message:e.message},{status:500})}}let d=new t.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/v1/doctors/route",pathname:"/api/v1/doctors",filename:"route",bundlePath:"app/api/v1/doctors/route"},resolvedPagePath:"/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/api/v1/doctors/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:h,headerHooks:f,staticGenerationBailout:P}=d,q="/api/v1/doctors/route";function A(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}},5638:(e,o,r)=>{function s(e=""){let o="https://clinic.aspiratcm.com/api/v1";if(!o){console.warn("警告: NEXT_PUBLIC_API_BASE_URL 未設置");let o="/api/v1";return console.log(`使用備用基礎URL: ${o}`),e?`${o}${e.startsWith("/")?e:`/${e}`}`:o}let r=o.endsWith("/")?o.slice(0,-1):o,s=e?e.startsWith("/")?e:`/${e}`:"",t=`${r}${s}`;console.log("\uD83D\uDD0D 組合後的 API URL：",t);try{new URL(t)}catch(e){console.error("\uD83D\uDEA8 生成的 URL 格式無效:",t),console.error("錯誤詳情:",e),console.error("環境設置:",{NODE_ENV:"production",NEXT_PUBLIC_API_BASE_URL:"https://clinic.aspiratcm.com/api/v1"})}return t}r.d(o,{l9:()=>s});let t=r(3949).Z.create({baseURL:s(),headers:{"Content-Type":"application/json",Accept:"application/json"},timeout:15e3});t.interceptors.request.use(e=>{if(console.log(`[API請求] ${e.method?.toUpperCase()} ${e.url}`),e.params&&console.log(`[請求參數] ${JSON.stringify(e.params)}`),e.data&&"string"!=typeof e.data)try{console.log(`[請求數據] ${JSON.stringify(e.data)}`)}catch(e){console.log(`[請求數據] 無法序列化`)}return e},e=>(console.error("[API請求錯誤]",e),Promise.reject(e))),t.interceptors.response.use(e=>(console.log(`[API響應] ${e.status} ${e.config.url}`),e),e=>{if(e.response){console.error(`[API錯誤] ${e.response.status}`,e.response.data);let o=e.config?.url||"未知URL",r=e.config?.method?.toUpperCase()||"UNKNOWN";console.error(`[${r} ${o}] 請求失敗，狀態碼: ${e.response.status}`),422===e.response.status&&console.error("[驗證錯誤] 資料驗證失敗:",e.response.data)}else e.request?console.error("[API錯誤] 沒有收到響應",e.request):console.error("[API錯誤]",e.message);return Promise.reject(e)})}};var o=require("../../../../webpack-runtime.js");o.C(e);var r=e=>o(o.s=e),s=o.X(0,[638,823],()=>r(4053));module.exports=s})();