"use strict";(()=>{var e={};e.id=320,e.ids=[320],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9491:e=>{e.exports=require("assert")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},6224:e=>{e.exports=require("tty")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},4750:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>g,originalPathname:()=>f,patchFetch:()=>A,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>d,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>h});var s={};r.r(s),r.d(s,{GET:()=>c});var o=r(5419),n=r(9108),i=r(9678),a=r(8070),p=r(5638);async function c(e){try{let t={processEnv:{NEXT_PUBLIC_API_BASE_URL:"https://clinic.aspiratcm.com/api/v1",NODE_ENV:"production"},apiUrls:{"/doctors":(0,p.l9)("/doctors"),"/appointments":(0,p.l9)("/appointments"),"/appointments/1":(0,p.l9)("/appointments/1"),"/appointments/by-phone":(0,p.l9)("/appointments/by-phone")},request:{url:e.url,headers:Object.fromEntries(e.headers.entries()),time:new Date().toISOString()}};return a.Z.json({status:"success",message:"API配置測試成功",config:t})}catch(e){return a.Z.json({status:"error",message:"測試失敗",error:e.message},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/v1/test-api-config/route",pathname:"/api/v1/test-api-config",filename:"route",bundlePath:"app/api/v1/test-api-config/route"},resolvedPagePath:"/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/api/v1/test-api-config/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:d,headerHooks:g,staticGenerationBailout:h}=u,f="/api/v1/test-api-config/route";function A(){return(0,i.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:m})}},5638:(e,t,r)=>{function s(e=""){let t="https://clinic.aspiratcm.com/api/v1";if(!t){console.warn("警告: NEXT_PUBLIC_API_BASE_URL 未設置");let t="/api/v1";return console.log(`使用備用基礎URL: ${t}`),e?`${t}${e.startsWith("/")?e:`/${e}`}`:t}let r=t.endsWith("/")?t.slice(0,-1):t,s=e?e.startsWith("/")?e:`/${e}`:"",o=`${r}${s}`;console.log("\uD83D\uDD0D 組合後的 API URL：",o);try{new URL(o)}catch(e){console.error("\uD83D\uDEA8 生成的 URL 格式無效:",o),console.error("錯誤詳情:",e),console.error("環境設置:",{NODE_ENV:"production",NEXT_PUBLIC_API_BASE_URL:"https://clinic.aspiratcm.com/api/v1"})}return o}r.d(t,{l9:()=>s});let o=r(3949).Z.create({baseURL:s(),headers:{"Content-Type":"application/json",Accept:"application/json"},timeout:15e3});o.interceptors.request.use(e=>{if(console.log(`[API請求] ${e.method?.toUpperCase()} ${e.url}`),e.params&&console.log(`[請求參數] ${JSON.stringify(e.params)}`),e.data&&"string"!=typeof e.data)try{console.log(`[請求數據] ${JSON.stringify(e.data)}`)}catch(e){console.log(`[請求數據] 無法序列化`)}return e},e=>(console.error("[API請求錯誤]",e),Promise.reject(e))),o.interceptors.response.use(e=>(console.log(`[API響應] ${e.status} ${e.config.url}`),e),e=>{if(e.response){console.error(`[API錯誤] ${e.response.status}`,e.response.data);let t=e.config?.url||"未知URL",r=e.config?.method?.toUpperCase()||"UNKNOWN";console.error(`[${r} ${t}] 請求失敗，狀態碼: ${e.response.status}`),422===e.response.status&&console.error("[驗證錯誤] 資料驗證失敗:",e.response.data)}else e.request?console.error("[API錯誤] 沒有收到響應",e.request):console.error("[API錯誤]",e.message);return Promise.reject(e)})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,823],()=>r(4750));module.exports=s})();