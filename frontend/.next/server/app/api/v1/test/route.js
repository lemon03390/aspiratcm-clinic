"use strict";(()=>{var e={};e.id=128,e.ids=[128],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9491:e=>{e.exports=require("assert")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},6224:e=>{e.exports=require("tty")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},3024:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>P,originalPathname:()=>f,patchFetch:()=>I,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>A});var s={};r.r(s),r.d(s,{GET:()=>c,POST:()=>l});var o=r(5419),a=r(9108),n=r(9678),u=r(8070),i=r(3949),p=r(5638);async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("endpoint");(0,p.l9)();let s={NODE_ENV:"production",NEXT_PUBLIC_API_BASE_URL:"https://clinic.aspiratcm.com/api/v1",currentUrl:e.url,requestInfo:{url:e.url,method:e.method,headers:Object.fromEntries(e.headers.entries())}};if("backend"===r)try{let e=await i.Z.get((0,p.l9)("/docs/"),{timeout:5e3});return u.Z.json({status:"success",message:"成功連接到後端API",backendStatus:e.status,config:s})}catch(e){return u.Z.json({status:"error",message:"無法連接到後端API",error:e.message,errorDetail:e.response?.data||"無詳細錯誤信息",config:s},{status:500})}return u.Z.json({status:"success",message:"前端API路由正常工作",timestamp:new Date().toISOString(),config:s})}catch(e){return u.Z.json({status:"error",message:"測試API端點發生錯誤",error:e.message},{status:500})}}async function l(e){try{let t=await e.json();return u.Z.json({status:"success",message:"POST測試成功",receivedData:t,timestamp:new Date().toISOString()})}catch(e){return u.Z.json({status:"error",message:"POST測試失敗",error:e.message},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/v1/test/route",pathname:"/api/v1/test",filename:"route",bundlePath:"app/api/v1/test/route"},resolvedPagePath:"/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/api/v1/test/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:h,headerHooks:P,staticGenerationBailout:A}=d,f="/api/v1/test/route";function I(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}},5638:(e,t,r)=>{function s(e=""){let t=process.env.API_BASE_URL;if(!t)throw console.error("\uD83D\uDD34 嚴重錯誤: 缺少基礎 API URL 環境變數"),Error("❌ 無法取得 API base URL，請確認 .env.production 已設置 API_BASE_URL 與 NEXT_PUBLIC_API_BASE_URL。");let r=`${t}${e.startsWith("/")?e:"/"+e}`;return console.log("\uD83E\uDDEA [Server] 使用 API_BASE_URL:",process.env.API_BASE_URL),r.startsWith("http:")&&(console.warn("⚠️ 警告: 發現不安全的 HTTP URL:",r),console.log("✅ 已修正為 HTTPS URL:",r=r.replace("http:","https:"))),r.startsWith("http")||r.startsWith("/")||(console.warn("⚠️ 警告: URL 缺少協議前綴:",r),console.log("✅ 已修正為完整 URL:",r="https://"+r)),r}r.d(t,{l9:()=>s});let o=r(3949).Z.create({baseURL:s(),headers:{"Content-Type":"application/json",Accept:"application/json"},timeout:15e3});o.interceptors.request.use(e=>{if(console.log(`[API請求] ${e.method?.toUpperCase()} ${e.url}`),e.params&&console.log(`[請求參數] ${JSON.stringify(e.params)}`),e.data&&"string"!=typeof e.data)try{console.log(`[請求數據] ${JSON.stringify(e.data)}`)}catch{console.log("[請求數據] 無法序列化")}return e},e=>(console.error("[API請求錯誤]",e),Promise.reject(e))),o.interceptors.response.use(e=>(console.log(`[API響應] ${e.status} ${e.config.url}`),e),e=>{let t=e?.response?.status,r=e?.config?.url,s=e?.config?.method?.toUpperCase();return t?console.error(`[${s} ${r}] 錯誤 ${t}`,e.response.data):console.error("[API錯誤]",e.message),Promise.reject(e)})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,823],()=>r(3024));module.exports=s})();