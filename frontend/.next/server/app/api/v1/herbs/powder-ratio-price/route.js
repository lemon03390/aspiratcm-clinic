"use strict";(()=>{var e={};e.id=550,e.ids=[550],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9491:e=>{e.exports=require("assert")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},6224:e=>{e.exports=require("tty")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},6720:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>y,originalPathname:()=>q,patchFetch:()=>j,requestAsyncStorage:()=>g,routeModule:()=>f,serverHooks:()=>x,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>b});var o={};t.r(o),t.d(o,{GET:()=>h});var s=t(5419),i=t(9108),a=t(9678),n=t(7147),p=t.n(n),c=t(8070),l=t(1017),u=t.n(l),d=t(5638);async function h(){try{let e=(0,d.l9)("/herbs/powder-ratio-price");console.log("Fetching herbs powder ratio price from backend:",e);let r=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"},next:{revalidate:3600}});if(r.ok){let e=await r.json();return console.log(`Successfully fetched ${e.length} herbs from API`),c.Z.json(e)}console.log("API request failed, trying local file");let t=u().join(process.cwd(),"public/data/powder_ratio_price.json");if(p().existsSync(t)){let e=p().readFileSync(t,"utf8"),r=JSON.parse(e);return console.log(`Successfully read ${r.length} herbs from local file`),c.Z.json(r)}return c.Z.json([])}catch(e){console.error("Error fetching herbs powder ratio price:",e);try{let e=u().join(process.cwd(),"public/data/powder_ratio_price.json");if(p().existsSync(e)){let r=p().readFileSync(e,"utf8"),t=JSON.parse(r);return console.log(`Successfully read ${t.length} herbs from local file after error`),c.Z.json(t)}}catch(e){console.error("Error reading local file:",e)}return c.Z.json({error:"Failed to fetch herbs powder ratio price"},{status:500})}}let f=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/v1/herbs/powder-ratio-price/route",pathname:"/api/v1/herbs/powder-ratio-price",filename:"route",bundlePath:"app/api/v1/herbs/powder-ratio-price/route"},resolvedPagePath:"/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/api/v1/herbs/powder-ratio-price/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:x,headerHooks:y,staticGenerationBailout:b}=f,q="/api/v1/herbs/powder-ratio-price/route";function j(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:m})}},5638:(e,r,t)=>{t.d(r,{l9:()=>s});var o=t(3949);let s=(e="")=>{let r=e.startsWith("/")?e:`/${e}`;return`https://clinic.aspiratcm.com/api/v1${r}`},i=o.Z.create({baseURL:s(),headers:{"Content-Type":"application/json",Accept:"application/json"},timeout:15e3});i.interceptors.request.use(e=>{if(console.log(`[API請求] ${e.method?.toUpperCase()} ${e.url}`),e.params&&console.log(`[請求參數] ${JSON.stringify(e.params)}`),e.data&&"string"!=typeof e.data)try{console.log(`[請求數據] ${JSON.stringify(e.data)}`)}catch{console.log("[請求數據] 無法序列化")}return e},e=>(console.error("[API請求錯誤]",e),Promise.reject(e))),i.interceptors.response.use(e=>(console.log(`[API響應] ${e.status} ${e.config.url}`),e),e=>{let r=e?.response?.status,t=e?.config?.url,o=e?.config?.method?.toUpperCase();return r?console.error(`[${o} ${t}] 錯誤 ${r}`,e.response.data):console.error("[API錯誤]",e.message),Promise.reject(e)})}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[638,823],()=>t(6720));module.exports=o})();