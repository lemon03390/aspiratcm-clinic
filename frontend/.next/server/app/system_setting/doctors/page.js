(()=>{var e={};e.id=922,e.ids=[922],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3460:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=t(482),a=t(9108),n=t(2563),i=t.n(n),l=t(8300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let c=["",{children:["system_setting",{children:["doctors",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7581)),"/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/system_setting/doctors/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6468)),"/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/system_setting/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1334)),"/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/system_setting/doctors/page.tsx"],u="/system_setting/doctors/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/system_setting/doctors/page",pathname:"/system_setting/doctors",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3654:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},7721:(e,s,t)=>{Promise.resolve().then(t.bind(t,5927))},9754:(e,s,t)=>{Promise.resolve().then(t.bind(t,1677))},5362:(e,s,t)=>{Promise.resolve().then(t.bind(t,2623))},5927:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var r=t(5344),a=t(6506),n=t(8428);function i(){let e=(0,n.usePathname)();return r.jsx("nav",{className:"bg-white shadow-md",children:r.jsx("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[r.jsx("div",{className:"flex items-center",children:r.jsx(a.default,{href:"/dashboard",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-blue-600 mr-2",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})}),r.jsx("span",{className:"font-bold text-lg text-gray-800",children:"診所管理系統"})]})})}),r.jsx("div",{className:"flex space-x-4",children:[{href:"/dashboard",label:"儀表板"},{href:"/appointments",label:"預約管理"},{href:"/system_setting",label:"系統設定"}].map(s=>r.jsx(a.default,{href:s.href,className:`inline-flex items-center px-3 py-2 border-b-2 text-sm font-medium leading-5 transition duration-150 ease-in-out ${e===s.href?"border-blue-500 text-blue-600 focus:outline-none focus:border-blue-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300"}`,children:s.label},s.href))})]})})})}},1677:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(5344),a=t(984),n=t(7665),i=t(6506),l=t(3729);function o({isOpen:e,onClose:s,onConfirm:t,title:a,message:n,confirmText:i="確認",cancelText:o="取消",confirmButtonColor:c="blue",width:d="md",children:u}){let[m,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{e?x(!0):x(!1)},[e]);let h=()=>{x(!1),setTimeout(s,300)};return e?r.jsx("div",{className:"fixed inset-0 z-[999999] overflow-y-auto","aria-labelledby":a,role:"dialog","aria-modal":"true",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center",children:[r.jsx("div",{className:`fixed inset-0 bg-gray-500 transition-opacity duration-300 ${m?"bg-opacity-75":"bg-opacity-0"}`,"aria-hidden":"true",onClick:h}),(0,r.jsxs)("div",{className:`inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all duration-300 ${(()=>{switch(d){case"sm":return"max-w-sm";case"lg":return"max-w-lg";case"xl":return"max-w-xl";default:return"max-w-md"}})()} ${m?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[r.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:r.jsx("div",{className:"sm:flex sm:items-start",children:(0,r.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[r.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:a}),r.jsx("div",{className:"mt-2",children:u||r.jsx("p",{className:"text-sm text-gray-500",children:n})})]})})}),(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[r.jsx("button",{type:"button",className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm ${(()=>{switch(c){case"red":return"bg-red-600 hover:bg-red-700 focus:ring-red-500";case"green":return"bg-green-600 hover:bg-green-700 focus:ring-green-500";case"yellow":return"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500";case"gray":return"bg-gray-600 hover:bg-gray-700 focus:ring-gray-500";default:return"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}})()}`,onClick:()=>{x(!1),setTimeout(t,300)},children:i}),r.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:h,children:o})]})]})]})}):null}function c({onClose:e,doctors:s,onDoctorsUpdate:t,isModal:i=!0}){let[c,d]=(0,l.useState)(!1),[u,m]=(0,l.useState)(""),[x,h]=(0,l.useState)(""),[p,f]=(0,l.useState)(""),[g,y]=(0,l.useState)(null),[b,j]=(0,l.useState)(!1),[v,w]=(0,l.useState)({monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1,sunday:!1}),{confirm:N,ConfirmDialog:k}=function(){let[e,s]=(0,l.useState)({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),t=()=>{s(e=>({...e,isOpen:!1}))};return{confirm:(e,t,r,a)=>{s({isOpen:!0,title:e,message:t,onConfirm:r,...a})},ConfirmDialog:()=>r.jsx(o,{isOpen:e.isOpen,onClose:t,onConfirm:e.onConfirm,title:e.title,message:e.message,confirmText:e.confirmText,cancelText:e.cancelText,confirmButtonColor:e.confirmButtonColor})}}(),{ToastContainer:_,success:C,error:P}=function(){let[e,s]=(0,l.useState)([]),t=(0,l.useCallback)(e=>{s(s=>s.filter(s=>s.id!==e))},[]),a=(0,l.useCallback)((e,r)=>{let a=Math.random().toString(36).substring(2,9);s(s=>[...s,{id:a,message:e,type:r}]),setTimeout(()=>{t(a)},3e3)},[t]),n=(0,l.useCallback)(e=>{a(e,"success")},[a]),i=(0,l.useCallback)(e=>{a(e,"error")},[a]),o=(0,l.useCallback)(e=>{a(e,"info")},[a]);return{ToastContainer:(0,l.useCallback)(()=>r.jsx("div",{className:"fixed bottom-4 right-4 z-[999999] space-y-2",children:e.map(e=>(0,r.jsxs)("div",{className:`px-4 py-2 rounded-md shadow-lg flex items-center ${"success"===e.type?"bg-green-500 text-white":"error"===e.type?"bg-red-500 text-white":"bg-blue-500 text-white"}`,children:[r.jsx("span",{children:e.message}),r.jsx("button",{onClick:()=>t(e.id),className:"ml-2 text-white",children:"\xd7"})]},e.id))}),[e,t]),success:n,error:i,info:o}}(),S=async e=>{try{let s=await n.Z.get((0,a.l)(`/doctors/${e}`));return console.log("獲取醫師詳細資料:",s.data),s.data}catch(e){return console.error("獲取醫師詳細資料失敗:",e),null}},q=async()=>{if(!p.trim()){h("請輸入醫師名稱");return}try{let e={name:p.trim(),phone:"",schedule:[]},s=await n.Z.post((0,a.l)("/doctors"),e,{headers:{"Content-Type":"application/json"},timeout:5e3});200===s.status||201===s.status?(f(""),t(),h("")):h("新增醫師失敗: 狀態碼 "+s.status)}catch(e){h("新增醫師失敗: "+(e?.response?.data?.detail||e.message||"未知錯誤")),console.error("新增醫師失敗:",e)}},$=async e=>{try{h("");let s=await S(e.id);if(s){y(s);let e=s.schedule||[];w({monday:e.includes("monday"),tuesday:e.includes("tuesday"),wednesday:e.includes("wednesday"),thursday:e.includes("thursday"),friday:e.includes("friday"),saturday:e.includes("saturday"),sunday:e.includes("sunday")})}else{y({...e,email:e.email||"",phone:e.phone||""});let s=e.schedule||[];w({monday:s.includes("monday"),tuesday:s.includes("tuesday"),wednesday:s.includes("wednesday"),thursday:s.includes("thursday"),friday:s.includes("friday"),saturday:s.includes("saturday"),sunday:s.includes("sunday")})}}catch(e){console.error("選擇醫師時出錯:",e),P("無法獲取醫師資料，請重試")}},A=async()=>{if(!g)return;let e=Object.entries(v).filter(([e,s])=>s).map(([e])=>e);try{j(!0);let s={name:g.name||"",email:g.email||"",phone:g.phone||"",schedule:e};console.log("即將發送 PUT 請求至",(0,a.l)(`/doctors/${g.id}`)),console.log("請求 payload:",JSON.stringify(s,null,2));let r=await n.Z.put((0,a.l)(`/doctors/${g.id}`),s);console.log("更新醫師排班成功:",r.data),t(),y(null),C("醫師排班已更新")}catch(e){console.error("更新排班失敗:",e),e.response&&(console.error("錯誤狀態:",e.response.status),console.error("錯誤詳情:",e.response.data)),P(`更新排班失敗：${e.response?.data?.detail||e.message||"請稍後再試"}`)}finally{j(!1)}},T=async e=>{try{N(`確定要刪除醫師 ${e.name} 嗎？`,"此操作無法復原",async()=>{try{let s=await n.Z.delete((0,a.l)(`/doctors/${e.id}`));200===s.status&&(t(),C("醫師已成功刪除"))}catch(e){console.error("刪除醫師失敗:",e),P(`刪除醫師失敗: ${e.response?.data?.detail||e.message||"未知錯誤"}`)}},{confirmText:"確認刪除",cancelText:"取消",confirmButtonColor:"red"})}catch(e){console.error("刪除醫師對話框出錯:",e),P(`操作失敗: ${e.message||"未知錯誤"}`)}};if(!c&&i)return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg w-96",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"醫師管理"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"0000"===u.trim()?(d(!0),h("")):h("密碼錯誤，請輸入正確的密碼")},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block mb-2",children:"請輸入密碼："}),r.jsx("input",{type:"password",value:u,onChange:e=>m(e.target.value),className:"border p-2 rounded w-full",required:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:"提示：系統默認密碼為 0000"})]}),x&&r.jsx("div",{className:"text-red-500 text-sm",children:x}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{type:"button",onClick:e,className:"bg-gray-500 text-white px-4 py-2 rounded",children:"取消"}),r.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:"確認"})]})]})]});let M=(0,r.jsxs)("div",{className:i?"space-y-6":"space-y-6 max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"border-b pb-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"新增醫師"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:p,onChange:e=>f(e.target.value),placeholder:"請輸入醫師名稱",className:"border p-2 rounded flex-1"}),r.jsx("button",{onClick:q,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"新增"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"醫師列表"}),r.jsx("div",{className:"space-y-2",children:s.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between border p-2 rounded",children:[r.jsx("span",{children:e.name}),(0,r.jsxs)("div",{className:"space-x-2",children:[r.jsx("button",{onClick:()=>$(e),className:"bg-yellow-500 text-white px-2 py-1 rounded",children:"調整應診時間"}),r.jsx("button",{onClick:()=>T(e),className:"bg-red-500 text-white px-2 py-1 rounded",children:"刪除"})]})]},e.id))})]}),g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[999999]",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg w-96",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:[g.name," - 應診時間"]}),r.jsx("div",{className:"space-y-2",children:Object.entries({monday:"星期一",tuesday:"星期二",wednesday:"星期三",thursday:"星期四",friday:"星期五",saturday:"星期六",sunday:"星期日"}).map(([e,s])=>(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:v[e],onChange:s=>w({...v,[e]:s.target.checked}),className:"mr-2"}),s]},e))}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[r.jsx("button",{onClick:()=>y(null),className:"bg-gray-500 text-white px-4 py-2 rounded",disabled:b,children:"取消"}),r.jsx("button",{onClick:A,className:"bg-blue-500 text-white px-4 py-2 rounded",disabled:b,children:b?"處理中...":"確認"})]})]})}),x&&r.jsx("div",{className:"text-red-500 text-sm mt-4",children:x}),i&&r.jsx("div",{className:"flex justify-end mt-6",children:r.jsx("button",{onClick:e,className:"bg-gray-500 text-white px-4 py-2 rounded",children:"關閉"})})]});return i?(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg w-[800px] max-h-[80vh] overflow-y-auto",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"醫師管理"}),M,r.jsx(_,{}),r.jsx(k,{})]}):(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6",children:"醫師管理"}),M,r.jsx(_,{}),r.jsx(k,{})]})}function d(){let[e,s]=(0,l.useState)([]),[t,o]=(0,l.useState)(!0),[d,u]=(0,l.useState)(null),m=async()=>{try{o(!0);let e=await n.Z.get((0,a.l)("/doctors"));console.log("獲取醫師數據:",e.data),s(e.data),u(null)}catch(e){console.error("獲取醫師數據失敗:",e),u(`獲取醫師數據失敗：${e.message||"未知錯誤"}`)}finally{o(!1)}};return(0,l.useEffect)(()=>{m()},[]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"醫師管理"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"管理診所醫師資料及應診時間"})]}),(0,r.jsxs)(i.default,{href:"/system_setting",className:"text-blue-500 hover:underline inline-flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 mr-1",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),"返回系統管理"]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:t?r.jsx("div",{className:"flex justify-center items-center p-10",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):d?r.jsx("div",{className:"p-6 text-red-500",children:d}):r.jsx(c,{doctors:e,onDoctorsUpdate:m,isModal:!1})})]})}},2623:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var r=t(5344);function a({children:e}){return r.jsx("div",{className:"min-h-screen bg-gray-100",children:r.jsx("div",{className:"container mx-auto py-8",children:e})})}t(3729)},984:(e,s,t)=>{"use strict";t.d(s,{l:()=>a});var r=t(7665);let a=e=>{let s="https://clinic.aspiratcm.com/api/v1",t=e.startsWith("/")?e:`/${e}`,r=s.endsWith("/")?s.slice(0,-1):s;return`${r}${t}`};r.Z.create({baseURL:"https://clinic.aspiratcm.com/api/v1",timeout:1e4,headers:{"Content-Type":"application/json"}})},1334:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c,metadata:()=>o});var r=t(5036);t(5023);let a=(0,t(6843).createProxy)(String.raw`/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/components/Navbar.tsx`),{__esModule:n,$$typeof:i}=a,l=a.default,o={title:"中醫診所管理系統",description:"診所預約管理系統"};function c({children:e}){return r.jsx("html",{lang:"zh-TW",children:(0,r.jsxs)("body",{suppressHydrationWarning:!0,className:"bg-gray-100 min-h-screen antialiased text-slate-800 font-sans",children:[r.jsx(l,{}),r.jsx("div",{className:"pt-16",children:e})]})})}},7581:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let r=(0,t(6843).createProxy)(String.raw`/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/system_setting/doctors/page.tsx`),{__esModule:a,$$typeof:n}=r,i=r.default},6468:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let r=(0,t(6843).createProxy)(String.raw`/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/system_setting/layout.tsx`),{__esModule:a,$$typeof:n}=r,i=r.default},5023:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[638,173,665],()=>t(3460));module.exports=r})();