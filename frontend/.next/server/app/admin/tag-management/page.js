(()=>{var e={};e.id=1676,e.ids=[1676],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},18683:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o});var r=s(50482),a=s(69108),l=s(62563),n=s.n(l),i=s(68300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let o=["",{children:["admin",{children:["tag-management",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,18957)),"/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/admin/tag-management/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,82050)),"/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,61334)),"/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/admin/tag-management/page.tsx"],x="/admin/tag-management/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/tag-management/page",pathname:"/admin/tag-management",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},45979:(e,t,s)=>{Promise.resolve().then(s.bind(s,68077))},68077:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(95344),a=s(47665),l=s(3729);let n=[{value:"red",label:"紅色",bgClass:"bg-red-100",textClass:"text-red-800",borderClass:"border-red-200"},{value:"yellow",label:"黃色",bgClass:"bg-yellow-100",textClass:"text-yellow-800",borderClass:"border-yellow-200"},{value:"blue",label:"藍色",bgClass:"bg-blue-100",textClass:"text-blue-800",borderClass:"border-blue-200"},{value:"green",label:"綠色",bgClass:"bg-green-100",textClass:"text-green-800",borderClass:"border-green-200"},{value:"purple",label:"紫色",bgClass:"bg-purple-100",textClass:"text-purple-800",borderClass:"border-purple-200"},{value:"indigo",label:"靛藍",bgClass:"bg-indigo-100",textClass:"text-indigo-800",borderClass:"border-indigo-200"},{value:"gray",label:"灰色",bgClass:"bg-gray-100",textClass:"text-gray-800",borderClass:"border-gray-200"}];function i(){let[e,t]=(0,l.useState)([]),[s,i]=(0,l.useState)(!0),[d,o]=(0,l.useState)(null),[c,x]=(0,l.useState)(null),[u,p]=(0,l.useState)(!1),[m,g]=(0,l.useState)({name:"",description:"",color:"blue",icon:"",is_active:!0}),b=async()=>{i(!0);try{let e=await a.Z.get("/api/v1/tag-settings");t(e.data),o(null)}catch(e){console.error("載入標籤失敗:",e),o("無法載入標籤數據")}finally{i(!1)}};(0,l.useEffect)(()=>{b()},[]);let h=e=>{x(e),p(!1)},y=async()=>{if(c)try{await a.Z.put(`/api/v1/tag-settings/${c.id}`,c),b(),x(null)}catch(e){console.error("更新標籤失敗:",e),o("更新標籤失敗")}},v=async()=>{try{await a.Z.post("/api/v1/tag-settings",m),b(),p(!1),g({name:"",description:"",color:"blue",icon:"",is_active:!0})}catch(e){console.error("創建標籤失敗:",e),o("創建標籤失敗")}},j=async e=>{if(confirm("確定要刪除這個標籤嗎？這將影響所有使用此標籤的預約。"))try{await a.Z.delete(`/api/v1/tag-settings/${e}`),b()}catch(e){console.error("刪除標籤失敗:",e),o("刪除標籤失敗")}},f=e=>({blue:"bg-blue-100 text-blue-800",red:"bg-red-100 text-red-800",green:"bg-green-100 text-green-800",yellow:"bg-yellow-100 text-yellow-800",orange:"bg-orange-100 text-orange-800",purple:"bg-purple-100 text-purple-800",indigo:"bg-indigo-100 text-indigo-800",pink:"bg-pink-100 text-pink-800",gray:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800";return s?r.jsx("div",{className:"p-8 text-center",children:"載入標籤中..."}):(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"標籤管理"}),r.jsx("button",{onClick:()=>{x(null),p(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded shadow hover:bg-indigo-700",children:"新增標籤"})]}),d&&r.jsx("div",{className:"bg-red-100 text-red-800 p-4 rounded mb-6",children:d}),u&&(0,r.jsxs)("div",{className:"mb-8 p-6 bg-gray-50 rounded shadow",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"新增標籤"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"標籤名稱"}),r.jsx("input",{type:"text",value:m.name,onChange:e=>g({...m,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"描述"}),r.jsx("input",{type:"text",value:m.description||"",onChange:e=>g({...m,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"顏色"}),r.jsx("select",{value:m.color,onChange:e=>g({...m,color:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded",children:n.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"圖示"}),r.jsx("input",{type:"text",value:m.icon||"",onChange:e=>g({...m,icon:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded",placeholder:"例如: \uD83D\uDD16, \uD83C\uDFF7️, ⚠️"})]}),(0,r.jsxs)("div",{className:"md:col-span-2 flex items-center",children:[r.jsx("input",{type:"checkbox",id:"new-is-active",checked:m.is_active,onChange:e=>g({...m,is_active:e.target.checked}),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"new-is-active",className:"ml-2 text-sm text-gray-700",children:"啟用標籤"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[r.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded",children:"取消"}),r.jsx("button",{onClick:v,className:"px-4 py-2 bg-green-600 text-white rounded",disabled:!m.name,children:"保存"})]})]}),c&&(0,r.jsxs)("div",{className:"mb-8 p-6 bg-gray-50 rounded shadow",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"編輯標籤"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"標籤名稱"}),r.jsx("input",{type:"text",value:c.name,onChange:e=>x({...c,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"描述"}),r.jsx("input",{type:"text",value:c.description||"",onChange:e=>x({...c,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"顏色"}),r.jsx("select",{value:c.color,onChange:e=>x({...c,color:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded",children:n.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"圖示"}),r.jsx("input",{type:"text",value:c.icon||"",onChange:e=>x({...c,icon:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded",placeholder:"例如: \uD83D\uDD16, \uD83C\uDFF7️, ⚠️"})]}),(0,r.jsxs)("div",{className:"md:col-span-2 flex items-center",children:[r.jsx("input",{type:"checkbox",id:"edit-is-active",checked:c.is_active,onChange:e=>x({...c,is_active:e.target.checked}),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"edit-is-active",className:"ml-2 text-sm text-gray-700",children:"啟用標籤"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[r.jsx("button",{onClick:()=>{x(null),p(!1)},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded",children:"取消"}),r.jsx("button",{onClick:y,className:"px-4 py-2 bg-green-600 text-white rounded",disabled:!c.name,children:"保存"})]})]}),r.jsx("div",{className:"overflow-x-auto bg-white rounded shadow",children:(0,r.jsxs)("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"標籤名稱"}),r.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"描述"}),r.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態"}),r.jsx("th",{className:"py-3 px-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),(0,r.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[e.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:(0,r.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium ${f(e.color)}`,children:[e.icon||"\uD83C\uDFF7️"," ",e.name]})}),r.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:e.description||"-"}),r.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:e.is_active?r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-md bg-green-100 text-green-800",children:"啟用"}):r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-md bg-gray-100 text-gray-800",children:"停用"})}),(0,r.jsxs)("td",{className:"py-3 px-4 whitespace-nowrap text-right text-sm",children:[r.jsx("button",{onClick:()=>h(e),className:"text-indigo-600 hover:text-indigo-800 mr-4",children:"編輯"}),r.jsx("button",{onClick:()=>j(e.id),className:"text-red-600 hover:text-red-800",children:"刪除"})]})]},e.id)),0===e.length&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"py-8 text-center text-gray-500",children:"沒有找到標籤"})})]})]})})]})}},18957:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>n});let r=(0,s(86843).createProxy)(String.raw`/Users/mountainfung/Desktop/AWS-Aspiratcm_local/frontend/src/app/admin/tag-management/page.tsx`),{__esModule:a,$$typeof:l}=r,n=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,7173,7665,8480],()=>s(18683));module.exports=r})();